{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}
    <h1> {{ title }} </h1>
    <hr align="left" width="600" class="hr" />

    <div class="row">
        <div class="col-md-6">
            <form action="" method="post">
                <div class="form-group">
                    {{ form.hidden_tag() }}
                    {% with %} {% set  specificform = form.lms_id %} {% include "helpers/field_form.html" %} {% endwith %}
                    {% with %} {% set  specificform = form.name %} {% include "helpers/field_form.html" %} {% endwith %}
                    {% with %} {% set  specificform = form.trainer_telegram_id %} {% include "helpers/field_form.html" %} {% endwith %}
                    {% with %} {% set  specificform = form.trainer_lms_id %} {% include "helpers/field_form.html" %} {% endwith %}
                </div>
                <label> Курс разделяется на блоки? </label>

                {{ form.blocks }}

                <button type="button" id="addNewBlock" class="btn btn-success">Добавить блок</button>
                <hr align="left" width="600" class="hr" />
                <p class="control-label">{{ form.submit() }}</p>

            </form>
        </div>
    </div>
{% endblock %}

{% block scripts %}

{{super()}}

<script type="text/javascript">
$(document).ready(function() {

    var num = 1;

    $("#addNewBlock").click(function() {

        var labelInputNumber = $("<label class='control-label'>Номер блока</label>")

        var labelInputLmsId = $("<label class='control-label'>LmsId блока</label>")
        .attr("style", "left: 30px; position: relative")

        var newInputNumber = $("<input required type='text'></input>")
            .attr("name", "blocks-" + num + "blocks_number")
            .attr("class", "form-control input_in_one_string")
            .attr("value", num)

        var newInputLmsId = $("<input required type='text' value=''></input>")
            .attr("name", "blocks-" + num + "blocks_required_task_lms_id")
            .attr("class", "form-control input_in_one_string")

        $("#blocks").append(labelInputNumber);
        $("#blocks").append(labelInputLmsId);
        labelInputNumber.append(newInputNumber)
        labelInputLmsId.append(newInputLmsId)
        $("#blocks").append($("<br/>"));

        num++;
    });
});
</script>
{% endblock %}